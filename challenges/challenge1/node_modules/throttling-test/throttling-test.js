var request = require('request-promise');

var fs = require('fs');
var logfile = 'request_log.txt';

var log = function (msg) {
    var l = fs.createWriteStream(logfile, { flags: 'a'});

    return l.write(msg + '\n');
};

module.exports = {
    endpoint: 'https://graph.facebook.com',
    token: 'abcdfiruweferug',

    get: function(action) {
        var options = {
            uri: this.endpoint + action + '?token=' + this.token,
            token: this.token
        };
        return request(options)
        .catch(function(err, result) {
            if (err) {
                log(err);
                throw(err);
            }
        });
    }
};